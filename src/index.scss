// #region scss
@use 'sass:math';
// #endregion
// #region Tailwind
@tailwind base;
@tailwind components;
@tailwind utilities;
// #endregion
// #region Base

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  @apply bg-black text-white;
}

// #endregion

$all-transition: 0.5s;

$base-transition: $all-transition;
$opacity-transition: 0.3s;
$filter-transition: $all-transition;

$VISIBLE_IMG_COUNT: 7;
$halfVisibleImgCount: floor(math.div($VISIBLE_IMG_COUNT, 2));
$brightnessStep: 30;

.carousel-wrapper {
  @apply relative;
}

.container {
  @apply w-full relative h-screen flex justify-center items-center;
  // @apply border-2 border-red-500;
  // width: calc((575px * 3 / 4) + (500px * 3 / 4));
  @apply w-[800px];

  .cover {
    // filter: brightness(100%);
    // position: absolute;
    // transition: all 0s ease;
    @apply absolute brightness-100 transition-all duration-0 ease-in-out;
    aspect-ratio: 3 / 4;
  }
}

@for $i from 1 through $VISIBLE_IMG_COUNT {
  $relativeIdx: $i - $halfVisibleImgCount - 1;
  $initialHeight: 575px;
  $heightStep: 75px;
  $translateStep: 45%;
  .cover:nth-of-type(#{$i}) {
    z-index: (103 - math.abs($relativeIdx));
    height: $initialHeight - math.abs($relativeIdx * $heightStep);
    $height: $initialHeight - math.abs($relativeIdx * $heightStep);
    transform: translateX(0 + $relativeIdx * $translateStep);
    filter: brightness(100% - math.abs($relativeIdx * $brightnessStep));
  }

  @if $i == 1 or $i == $VISIBLE_IMG_COUNT {
    .cover:nth-of-type(#{$i}) {
      opacity: 0;
    }
  }

  @if $i != $halfVisibleImgCount + 1 {
    .container .cover:nth-child(#{$i}) .watch-now-btn-wrapper {
      pointer-events: none;
    }
  }

  .container {
    &.scrollLeft .cover:nth-of-type(#{$i}) {
      transition: all $base-transition ease;

      transform: translateX(0 + $relativeIdx * $translateStep + $translateStep);
      height: $initialHeight - math.abs(($relativeIdx + 1) * $heightStep);
      $height: $initialHeight - math.abs($relativeIdx * $heightStep);
      filter: brightness(100% - math.abs(($relativeIdx + 1) * $brightnessStep));
      @if $i == 1 {
        opacity: 1;
      }

      @if $i == $VISIBLE_IMG_COUNT - 1 {
        opacity: 0;
      }
    }

    &.scrollRight .cover:nth-of-type(#{$i}) {
      transition: all $base-transition ease;
      transform: translateX(0 + $relativeIdx * $translateStep - $translateStep);
      height: $initialHeight -
        math.abs(($relativeIdx - 1) * $heightStep) !important;
      $height: $initialHeight - math.abs($relativeIdx * $heightStep);
      filter: brightness(100% - math.abs(($relativeIdx - 1) * $brightnessStep));

      @if $i == $VISIBLE_IMG_COUNT {
        opacity: 1;
      }

      @if $i == 2 {
        opacity: 0;
      }
    }
  }
}

.chevron {
  @apply text-5xl text-white px-10 py-3 z-[1000] absolute;
}

// ALLLLLLLAAAAAAAAA

.containerGGG {
  @apply w-full relative h-screen flex justify-center items-center;
  z-index: 10000000;
  // @apply border-2 border-red-500;
  width: calc((575px * 3 / 4) + (500px * 3 / 4));
  .coverGGG {
    position: absolute;
    filter: brightness(100%);
    transition: all 0s ease;
    aspect-ratio: 3 / 4;
  }

  .ghost-cover {
    pointer-events: none;
    position: absolute;
    height: 500px;
    aspect-ratio: 3/4;
    transition: all 0s ease;
    opacity: 0;
    z-index: 1000;
    filter: brightness(100% - $brightnessStep);
    &.left {
      transform: translateX(-45%);
    }

    &.right {
      transform: translateX(45%);
    }
  }

  &.scrollLeft,
  &.scrollRight {
    .ghost-cover {
      transition: all $base-transition ease, opacity $opacity-transition ease,
        filter $filter-transition ease !important;
      height: 575px;
    }
  }

  &.scrollLeft {
    .ghost-cover.left {
      transform: translateX(0%);
      filter: brightness(100%);

      opacity: 1;
    }
  }
  &.scrollRight {
    .ghost-cover.right {
      transform: translateX(0%);
      filter: brightness(100%);
      opacity: 1;
    }
  }
}
img {
  max-width: 100%;
  // display: none;
}

@for $i from 1 through $VISIBLE_IMG_COUNT {
  $relativeIdx: $i - $halfVisibleImgCount - 1;
  $initialHeight: 575px;
  $heightStep: 75px;
  $translateStep: 45%;
  .coverGGG:nth-of-type(#{$i}) {
    z-index: (103 - math.abs($relativeIdx));
    height: $initialHeight - math.abs($relativeIdx * $heightStep);
    $height: $initialHeight - math.abs($relativeIdx * $heightStep);
    transform: translateX(0 + $relativeIdx * $translateStep);
    filter: brightness(100% - math.abs($relativeIdx * $brightnessStep));
  }

  @if $i == 1 or $i == $VISIBLE_IMG_COUNT {
    .coverGGG:nth-of-type(#{$i}) {
      opacity: 0;
    }
  }

  @if $i != $halfVisibleImgCount + 1 {
    .containerGGG .coverGGG:nth-child(#{$i}) .watch-now-btn-wrapper {
      pointer-events: none;
    }
  }

  @if $i != $halfVisibleImgCount + 2 {
    .coverGGG:nth-of-type(#{$i}) {
      opacity: 0;
    }
  } @else {
    .coverGGG:nth-of-type(#{$i}) {
      // filter: invert(100%);
      opacity: 0;
    }
  }

  .containerGGG {
    &.scrollLeft .coverGGG:nth-of-type(#{$i}) {
      transition: all $base-transition ease;
      transform: translateX(0 + $relativeIdx * $translateStep + $translateStep);
      height: $initialHeight - math.abs(($relativeIdx + 1) * $heightStep);
      $height: $initialHeight - math.abs($relativeIdx * $heightStep);
      filter: brightness(100% - math.abs(($relativeIdx + 1) * $brightnessStep));
    }

    &.scrollRight .coverGGG:nth-of-type(#{$i}) {
      transition: all $base-transition ease;
      transform: translateX(0 + $relativeIdx * $translateStep - $translateStep);
      height: $initialHeight -
        math.abs(($relativeIdx - 1) * $heightStep) !important;
      $height: $initialHeight - math.abs($relativeIdx * $heightStep);
      filter: brightness(100% - math.abs(($relativeIdx - 1) * $brightnessStep));
    }

    @if $i == $halfVisibleImgCount + 2 {
      &.scrollRight .coverGGG:nth-of-type(#{$i}) {
        opacity: 1;
        // display: none;
      }
    }

    @if $i == $halfVisibleImgCount {
      &.scrollLeft .coverGGG:nth-of-type(#{$i}) {
        opacity: 1;
        // display: none;
      }
    }
  }
}
